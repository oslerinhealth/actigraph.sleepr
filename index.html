<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detect Periods of Sleep and Non-Wear from ActiGraph Data • actigraph.sleepr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Detect Periods of Sleep and Non-Wear from ActiGraph Data">
<meta property="og:description" content="Reads *.agd files exported from ActiGraph devices;
        implements the Troiano &lt;doi:10.1249/mss.0b013e31815a51b3&gt; and
        Choi &lt;doi:10.1249/MSS.0b013e3181ed61a3&gt; algorithms for
        detecting periods on non-wear; implements the Sadeh
        &lt;doi:10.1093/sleep/17.3.201&gt; and Cole-Kripke
        &lt;doi:10.1093/sleep/15.5.461&gt; algorithms for detecting
        asleep/awake state and the Tudor-Locke
        &lt;doi:10.1139/apnm-2013-0173&gt; algorithm to detect sleep periods
        from asleep/awake states.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">actigraph.sleepr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/detect-nonwear.html">Non-wear detection from ActiGraph data</a>
    </li>
    <li>
      <a href="articles/detect-sleep.html">Sleep detection from ActiGraph data</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/dipetkov/actigraph.sleepr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="actigraphsleepr-sleep-and-non-wear-detection-from-actigraph-data" class="section level3">
<h3 class="hasAnchor">
<a href="#actigraphsleepr-sleep-and-non-wear-detection-from-actigraph-data" class="anchor" aria-hidden="true"></a><code>actigraph.sleepr</code>: Sleep and non-wear detection from ActiGraph data</h3>
<p>The <code>actigraph.sleepr</code> package implements three sleep scoring/detection algorithms: Sadeh (Sadeh, Sharkey, and Carskadon 1994), Cole-Kripke (Cole et al. 1992) and Tudor-Locke (Tudor-Locke et al. 2014) as well as two non-wear detection algorithms: Troiano (Troiano et al. 2008) and Choi (Choi et al. 2011).</p>
</div>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor" aria-hidden="true"></a>Installation</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># install.packages("remotes")</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"dipetkov/actigraph.sleepr"</span>)</span></code></pre></div>
</div>
<div id="read-agd-files" class="section level3">
<h3 class="hasAnchor">
<a href="#read-agd-files" class="anchor" aria-hidden="true"></a>Read AGD file(s)</h3>
<p>An AGD file is an SQLite database file exported by an ActiGraph device. See the <a href="https://www.actigraphcorp.com/support/manuals/actilife-6-manual/" class="external-link">ActiLife 6 User manual</a>. For illustration let’s use one day of sample data recorded by a GT3X+ monitor.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(<span class="st">"actigraph.sleepr"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>file_10s &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"GT3XPlus-RawData-Day01.agd"</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="dt">package =</span> <span class="st">"actigraph.sleepr"</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>)</span>
<span id="cb2-5"><a href="#cb2-5"></a>agdb_10s &lt;-<span class="st"> </span><span class="kw">read_agd</span>(file_10s)</span></code></pre></div>
<p>The <code>read_agd</code> function loads the raw activity measurements into a convenient format: a tibble (data frame) of timestamped activity counts, whose attributes are the device settings. However, further manipulations of the tibble using the <code>dplyr</code> verbs (e.g., <code>mutate</code>, <code>inner_join</code>) might drop these non-standard attributes, i.e., the attributes are not always inherited.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">attributes</span>(agdb_10s)[<span class="dv">10</span><span class="op">:</span><span class="dv">12</span>]</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt; $devicename</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt; [1] "GT3XPlus"</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt; </span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt; $deviceserial</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt; [1] "NEO1DXXXXXXXX"</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; </span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt; $deviceversion</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; [1] "2.5.0"</span></span></code></pre></div>
<p>Since the data is stored in a tibble, we can use the dplyr verbs (mutate, select, filter, summarise, group_by, arrange) to manipulate the data. For example, let’s compute the vector magnitude of the three-axis counts (axis1 - vertical, axis2 - horizontal, axis3 - lateral).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">suppressMessages</span>(<span class="kw">library</span>(<span class="st">"dplyr"</span>))</span>
<span id="cb4-2"><a href="#cb4-2"></a>agdb_10s &lt;-<span class="st"> </span>agdb_10s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(timestamp, <span class="kw">starts_with</span>(<span class="st">"axis"</span>))</span>
<span id="cb4-3"><a href="#cb4-3"></a>agdb_10s <span class="op">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">magnitude =</span> <span class="kw">sqrt</span>(axis1<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>axis2<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>axis3<span class="op">^</span><span class="dv">2</span>))</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt; # A tibble: 8,999 x 5</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt;    timestamp           axis1 axis2 axis3 magnitude</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt;    &lt;dttm&gt;              &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt;  1 2012-06-27 10:54:00   377   397   413      686.</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#&gt;  2 2012-06-27 10:54:10   465   816  1225     1544.</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt;  3 2012-06-27 10:54:20   505   444   713      980.</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt;  4 2012-06-27 10:54:30    73    91   106      158.</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt;  5 2012-06-27 10:54:40    45    43   115      131.</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#&gt;  6 2012-06-27 10:54:50     0     0     0        0 </span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">#&gt;  7 2012-06-27 10:55:00     0     0     0        0 </span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">#&gt;  8 2012-06-27 10:55:10   207   218   270      404.</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">#&gt;  9 2012-06-27 10:55:20     0     0     0        0 </span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">#&gt; 10 2012-06-27 10:55:30     0     0     0        0 </span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">#&gt; # … with 8,989 more rows</span></span></code></pre></div>
</div>
<div id="reintegrate-from-10s-to-60s-epochs" class="section level3">
<h3 class="hasAnchor">
<a href="#reintegrate-from-10s-to-60s-epochs" class="anchor" aria-hidden="true"></a>Reintegrate from 10s to 60s epochs</h3>
<p>The Sadeh and Cole-Kripke algorithms for converting activity measurements into asleep/awake indicators were developed for 60s epochs. If the data is in smaller epochs, we need to collapse or aggregate the epochs. The example data is in 10s epochs. So we aggregate the epochs from 10s to 60s by adding the counts for the six consecutive 10s epochs that fall into the same 60s epoch.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Collapse epochs from 10 sec to 60 sec by summing</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>agdb_60s &lt;-<span class="st"> </span>agdb_10s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collapse_epochs</span>(<span class="dv">60</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a>agdb_60s</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; # A tibble: 1,500 x 4</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt;    timestamp           axis1 axis2 axis3</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt;    &lt;dttm&gt;              &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;  1 2012-06-27 10:54:00  1465  1791  2572</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;  2 2012-06-27 10:55:00   207   218   270</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt;  3 2012-06-27 10:56:00   169   257   270</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt;  4 2012-06-27 10:57:00     0     0     0</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;  5 2012-06-27 10:58:00   157   174   248</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt;  6 2012-06-27 10:59:00    23    23   279</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt;  7 2012-06-27 11:00:00     0     0     0</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt;  8 2012-06-27 11:01:00     0     0     0</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt;  9 2012-06-27 11:02:00     0     0     0</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt; 10 2012-06-27 11:03:00     0     0     0</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt; # … with 1,490 more rows</span></span></code></pre></div>
</div>
<div id="sleep-scoring-with-the-sadeh-algorithm" class="section level3">
<h3 class="hasAnchor">
<a href="#sleep-scoring-with-the-sadeh-algorithm" class="anchor" aria-hidden="true"></a>Sleep scoring with the Sadeh algorithm</h3>
<p>The Sadeh algorithm is primarily used for younger adolescents as the supporting research was performed on children and young adults. It takes 60s epochs and uses an 11-minute window that includes the five previous and five future epochs. The <code>apply_sadeh</code> function implements the algorithm as described in the ActiGraph user manual.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>agdb_60s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">apply_sadeh</span>()</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#&gt; # A tibble: 1,500 x 6</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#&gt;    timestamp           axis1 axis2 axis3 count sleep</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#&gt;    &lt;dttm&gt;              &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#&gt;  1 2012-06-27 10:54:00  1465  1791  2572   300 W    </span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt;  2 2012-06-27 10:55:00   207   218   270   207 W    </span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt;  3 2012-06-27 10:56:00   169   257   270   169 W    </span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt;  4 2012-06-27 10:57:00     0     0     0     0 W    </span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt;  5 2012-06-27 10:58:00   157   174   248   157 W    </span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt;  6 2012-06-27 10:59:00    23    23   279    23 W    </span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt;  7 2012-06-27 11:00:00     0     0     0     0 S    </span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt;  8 2012-06-27 11:01:00     0     0     0     0 S    </span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt;  9 2012-06-27 11:02:00     0     0     0     0 S    </span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt; 10 2012-06-27 11:03:00     0     0     0     0 S    </span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt; # … with 1,490 more rows</span></span></code></pre></div>
</div>
<div id="sleep-scoring-with-the-cole-kripke-algorithm" class="section level3">
<h3 class="hasAnchor">
<a href="#sleep-scoring-with-the-cole-kripke-algorithm" class="anchor" aria-hidden="true"></a>Sleep scoring with the Cole-Kripke algorithm</h3>
<p>The Cole-Kripke algorithm is primarily used for adult populations as the supporting research was performed on subjects ranging from 35 to 65 years of age. Like the Sadeh algorithm, it takes 60s epochs and uses a 7-minute window that includes the four previous and two future epochs. The <code>apply_cole</code> function implements the algorithm as described in the ActiGraph user manual.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>agdb_60s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">apply_cole_kripke</span>()</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co">#&gt; # A tibble: 1,500 x 6</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co">#&gt;    timestamp           axis1 axis2 axis3 count sleep</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">#&gt;    &lt;dttm&gt;              &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">#&gt;  1 2012-06-27 10:54:00  1465  1791  2572 14.6  W    </span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co">#&gt;  2 2012-06-27 10:55:00   207   218   270  2.07 W    </span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co">#&gt;  3 2012-06-27 10:56:00   169   257   270  1.69 W    </span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">#&gt;  4 2012-06-27 10:57:00     0     0     0  0    W    </span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">#&gt;  5 2012-06-27 10:58:00   157   174   248  1.57 W    </span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt;  6 2012-06-27 10:59:00    23    23   279  0.23 S    </span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt;  7 2012-06-27 11:00:00     0     0     0  0    S    </span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt;  8 2012-06-27 11:01:00     0     0     0  0    S    </span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt;  9 2012-06-27 11:02:00     0     0     0  0    S    </span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt; 10 2012-06-27 11:03:00     0     0     0  0    S    </span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">#&gt; # … with 1,490 more rows</span></span></code></pre></div>
</div>
<div id="sleep-period-detection-with-the-tudor-locke-algorithm" class="section level3">
<h3 class="hasAnchor">
<a href="#sleep-period-detection-with-the-tudor-locke-algorithm" class="anchor" aria-hidden="true"></a>Sleep period detection with the Tudor-Locke algorithm</h3>
<p>Once each one-minute epoch is labeled as asleep (S) or awake (W), we can use the Tudor-Locke algorithm to detect periods of time in bed and, for each period, to compute sleep quality metrics such as total minutes in bed, total sleep time, number and average length of awakenings, movement and fragmentation index.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>agdb_60s <span class="op">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="st">  </span><span class="kw">apply_sadeh</span>() <span class="op">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="st">  </span><span class="kw">apply_tudor_locke</span>()</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#&gt;           in_bed_time        out_bed_time               onset latency</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">#&gt; 1 2012-06-28 00:03:00 2012-06-28 07:38:00 2012-06-28 00:03:00       0</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt;   efficiency duration activity_counts nonzero_epochs total_sleep_time</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt; 1   97.14286      455            9126             27              442</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt;   wake_after_onset nb_awakenings ave_awakening movement_index</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt; 1               13             4          3.25       5.934066</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt;   fragmentation_index sleep_fragmentation_index</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt; 1                  40                  45.93407</span></span></code></pre></div>
</div>
<div id="non-wear-period-detection-with-the-troiano-and-choi-algorithms" class="section level3">
<h3 class="hasAnchor">
<a href="#non-wear-period-detection-with-the-troiano-and-choi-algorithms" class="anchor" aria-hidden="true"></a>Non-wear period detection with the Troiano and Choi algorithms</h3>
<p>Long stretches that consist almost entirely of zero counts (zero epochs) suggest that the device wasn’t worn at all and therefore should be excluded from downstream analysis. The Troiano algorithm for detecting periods of non-wear formalizes a technique used to analyze the 2003-2004 NHANES data, which allows a non-wear period to contain a few nonzero epochs of artifactual movement (spikes). The Choi algorithm extends the Troiano algorithm by requiring that short spikes of artifactual movement during a non-wear period are preceded and followed by a fixed number of consecutive zero epochs.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>agdb_60s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">apply_troiano</span>()</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">#&gt;          period_start          period_end length</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">#&gt; 1 2012-06-28 00:00:00 2012-06-28 02:37:00    157</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">#&gt; 2 2012-06-28 02:46:00 2012-06-28 03:59:00     73</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">#&gt; 3 2012-06-28 05:50:00 2012-06-28 07:25:00     95</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>agdb_60s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">apply_choi</span>()</span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">#&gt;   period_start          period_end length</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">#&gt; 1   2012-06-28 2012-06-28 02:37:00    157</span></span></code></pre></div>
</div>
<div id="references" class="section level3">
<h3 class="hasAnchor">
<a href="#references" class="anchor" aria-hidden="true"></a>References</h3>
<div id="refs" class="references hanging-indent">
<div id="ref-Choi:2011aa">
<p>Choi, Leena, Zhouwen Liu, Charles E. Matthews, and Maciej S. Buchowski. 2011. “Validation of Accelerometer Wear and Nonwear Time Classification Algorithm.” <em>Medicine &amp; Science in Sports &amp; Exercise</em> 43 (2): 357–64.</p>
</div>
<div id="ref-Cole:1992aa">
<p>Cole, Roger J, Daniel F Kripke, William Gruen, Daniel J Mullaney, and J Christian Gillin. 1992. “Automatic Sleep/Wake Identification from Wrist Activity.” <em>Sleep</em> 15 (5): 461–69.</p>
</div>
<div id="ref-Sadeh:1994aa">
<p>Sadeh, Avi, Katherine M Sharkey, and Mary A Carskadon. 1994. “Activity Based Sleep-Wake Identification: An Empirical Test of Methodological Issues.” <em>Sleep</em> 17 (3): 201–7.</p>
</div>
<div id="ref-Troiano:2008aa">
<p>Troiano, Richard P, David Berrigan, Kevin W Dodd, Louise C Mâsse, Timothy Tilert, and Margaret McDowell. 2008. “Physical Activity in the United States Measured by Accelerometer.” <em>Medicine &amp; Science in Sports &amp; Exercise</em> 40 (1): 181–88.</p>
</div>
<div id="ref-Tudor-Locke:2014aa">
<p>Tudor-Locke, Catrine, Tiago V. Barreira, John M. Schuna, Emily F. Mire, and Peter T. Katzmarzyk. 2014. “Fully Automated Waist-Worn Accelerometer Algorithm for Detecting Children’s Sleep-Period Time Separate from 24-H Physical Activity or Sedentary Behaviors.” <em>Applied Physiology, Nutrition, and Metabolism</em> 39 (1): 53–57.</p>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="http://github.com/dipetkov/actigraph.sleepr/">http://​github.com/​dipetkov/​actigraph.sleepr/​</a>
</li>
<li>Report a bug at <br><a href="http://github.com/dipetkov/actigraph.sleepr/issues">http://​github.com/​dipetkov/​actigraph.sleepr/​issues</a>
</li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>


<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Desislava Petkova <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://ci.appveyor.com/project/dipetkov/actigraph.sleepr" class="external-link"><img src="https://ci.appveyor.com/api/projects/status/github/dipetkov/actigraph.sleepr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://travis-ci.org/dipetkov/actigraph.sleepr" class="external-link"><img src="https://travis-ci.org/dipetkov/actigraph.sleepr.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/dipetkov/actigraph.sleepr" class="external-link"><img src="https://codecov.io/gh/dipetkov/actigraph.sleepr/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Desislava Petkova.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
