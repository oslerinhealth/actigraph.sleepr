<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Apply the Cole-Kripke algorithm — apply_cole_kripke • actigraph.sleepr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Apply the Cole-Kripke algorithm — apply_cole_kripke" />
<meta property="og:description" content="The Cole-Kripke sleep scoring algorithm is primarily used for adult
populations as the supporting research was performed on subjects
ranging from 35 to 65 years of age." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">actigraph.sleepr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/detect-nonwear.html">Non-wear detection from ActiGraph data</a>
    </li>
    <li>
      <a href="../articles/detect-sleep.html">Sleep detection from ActiGraph data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/dipetkov/actigraph.sleepr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Apply the Cole-Kripke algorithm</h1>
    <small class="dont-index">Source: <a href='http://github.com/dipetkov/actigraph.sleepr/blob/master/R/apply_cole_kripke.R'><code>R/apply_cole_kripke.R</code></a></small>
    <div class="hidden name"><code>apply_cole_kripke.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The Cole-Kripke sleep scoring algorithm is primarily used for adult
populations as the supporting research was performed on subjects
ranging from 35 to 65 years of age.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>apply_cole_kripke</span><span class='op'>(</span><span class='va'>agdb</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>agdb</th>
      <td><p>A <code>tibble</code> (<code>tbl</code>) of activity data
(at least) an <code>epochlength</code> attribute. The epoch length must
be 60 seconds.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>tibble</code> (<code>tbl</code>) of activity data. A new column
<code>sleep</code> indicates whether each 60s epoch is scored as asleep (S)
or awake (W).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The original paper proposes three versions of the Cole-Kripke algorithm,
optimized for 1-minute, 30-second and 10-second epochs. Here only the 1-min
version is implemented and therefore the <code>apply_cole_kripke</code> function
requires that the activity data is in 60s epochs. Use the
<code><a href='collapse_epochs.html'>collapse_epochs</a></code> function to modify higher-frequency data,
if necessary.</p>
<p>The Cole-Kripke algorithm uses the y-axis (axis 1) counts. First epoch
counts are divided by 100 and any scaled counts over 300 are clipped to 300.
This transformation is specific to ActiGraph devices. The sleep index (SI)
is defined as</p>
<p><code>
.001 * (106 * epoch_prev(4) + 54 * epoch_prev(3) +
         58 * epoch_prev(2) + 76 * epoch_prev(1) +
        230 * epoch +
         74 * epoch_next(1) + 67 * epoch_next(2))
</code></p>
<p>where at epoch <code>t</code>, <code>epoch_prev(i)</code> is the scaled activity count
<code>i</code> epochs before <code>t</code>. Similarly, <code>epoch_next(i)</code> is the
scaled activity count <code>i</code> epochs before <code>t</code>. That is, the algorithm
uses a 7-epoch window which includes the four preceding and the two
subsequent epochs. The time series of activity counts is padded with zeros as
necessary, at the beginning and at the end.</p>
<p>Finally, the sleep state is awake (W) if the sleep index SI is less
than 1; otherwise the sleep state is asleep (S).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>RJ Cole, DF Kripke, W Gruen, DJ Mullaney and JC Gillin.
Automatic sleep/wake identification from wrist activity.
<em>Sleep</em>, 15(5):461–469, 1992.</p>
<p>ActiLife 6 User's Manual by the ActiGraph Software
Department. 04/03/2012.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='collapse_epochs.html'>collapse_epochs</a></code>, <code><a href='apply_sadeh.html'>apply_sadeh</a></code>,
<code><a href='apply_tudor_locke.html'>apply_tudor_locke</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://dplyr.tidyverse.org'>"dplyr"</a></span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"gtxplus1day"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>gtxplus1day</span> <span class='op'><a href='pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'><a href='collapse_epochs.html'>collapse_epochs</a></span><span class='op'>(</span><span class='fl'>60</span><span class='op'>)</span> <span class='op'><a href='pipe.html'>%&gt;%</a></span></span>
<span class='r-in'>  <span class='fu'>apply_cole_kripke</span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 1,500 x 6</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    timestamp           axis1 axis2 axis3 count sleep</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    <span style='color: #949494;font-style: italic;'>&lt;dttm&gt;</span><span>              </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span><span> 2012-06-27 </span><span style='color: #949494;'>10:54:00</span><span>  </span><span style='text-decoration: underline;'>1</span><span>465  </span><span style='text-decoration: underline;'>1</span><span>791  </span><span style='text-decoration: underline;'>2</span><span>572 14.6  W    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span><span> 2012-06-27 </span><span style='color: #949494;'>10:55:00</span><span>   207   218   270  2.07 W    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span><span> 2012-06-27 </span><span style='color: #949494;'>10:56:00</span><span>   169   257   270  1.69 W    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span><span> 2012-06-27 </span><span style='color: #949494;'>10:57:00</span><span>     0     0     0  0    W    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span><span> 2012-06-27 </span><span style='color: #949494;'>10:58:00</span><span>   157   174   248  1.57 W    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span><span> 2012-06-27 </span><span style='color: #949494;'>10:59:00</span><span>    23    23   279  0.23 S    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span><span> 2012-06-27 </span><span style='color: #949494;'>11:00:00</span><span>     0     0     0  0    S    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span><span> 2012-06-27 </span><span style='color: #949494;'>11:01:00</span><span>     0     0     0  0    S    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span><span> 2012-06-27 </span><span style='color: #949494;'>11:02:00</span><span>     0     0     0  0    S    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span><span> 2012-06-27 </span><span style='color: #949494;'>11:03:00</span><span>     0     0     0  0    S    </span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># … with 1,490 more rows</span></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Desislava Petkova.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


